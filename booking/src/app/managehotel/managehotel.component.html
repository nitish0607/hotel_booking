<app-adminnavbar></app-adminnavbar>


<div class="container mt-5">

    <!-- Back Button -->
    <div class="d-flex justify-content-end">
        <button class="btn btn-primary" (click)="backtotable()">Back</button>

    </div>

    <!-- Add Hotel Button -->
    <div class="d-flex justify-content-start mb-1">
        <button class="btn btn-success" (click)="toggleForm()">Add Hotel</button>

    </div>




    <!-- Form will be displayed only when showForm is true -->
    <div *ngIf="showForm" class="card shadow-sm p-4">
        <h2 class="text-center mb-4">Add New Hotel</h2>
        <div [formGroup]="addhotel" (ngSubmit)="submit()">
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" placeholder="Enter hotel name"
                        formControlName="name"
                        [ngClass]="{ 'is-invalid': addhotel.get('name').touched && addhotel.get('name').invalid }">
                    <div *ngIf="addhotel.get('name').touched && addhotel.get('name').invalid" class="invalid-feedback">
                        Name is required
                    </div>
                </div>
                <div class="col-md-6">
                    <label for="address" class="form-label">Address</label>
                    <input type="text" class="form-control" id="address" placeholder="Enter hotel address"
                        formControlName="address"
                        [ngClass]="{ 'is-invalid': addhotel.get('address').touched && addhotel.get('address').invalid }">
                    <div *ngIf="addhotel.get('address').touched && addhotel.get('address').invalid"
                        class="invalid-feedback">
                        Address is required
                    </div>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="city" class="form-label">City</label>
                    <input type="text" class="form-control" id="city" placeholder="Enter city" formControlName="city"
                        [ngClass]="{ 'is-invalid': addhotel.get('city').touched && addhotel.get('city').invalid }">
                    <div *ngIf="addhotel.get('city').touched && addhotel.get('city').invalid" class="invalid-feedback">
                        City is required
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="state" class="form-label">State</label>
                    <input type="text" class="form-control" id="state" placeholder="Enter state" formControlName="state"
                        [ngClass]="{ 'is-invalid': addhotel.get('state').touched && addhotel.get('state').invalid }">
                    <div *ngIf="addhotel.get('state').touched && addhotel.get('state').invalid"
                        class="invalid-feedback">
                        State is required
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="country" class="form-label">Country</label>
                    <input type="text" class="form-control" id="country" placeholder="Enter country"
                        formControlName="country"
                        [ngClass]="{ 'is-invalid': addhotel.get('country').touched && addhotel.get('country').invalid }">
                    <div *ngIf="addhotel.get('country').touched && addhotel.get('country').invalid"
                        class="invalid-feedback">
                        Country is required
                    </div>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="zipCode" class="form-label">Zip Code</label>
                    <input type="text" class="form-control" id="zipCode" placeholder="Enter zip code"
                        formControlName="zipcode"
                        [ngClass]="{ 'is-invalid': addhotel.get('zipcode').touched && addhotel.get('zipcode').invalid }">
                    <div *ngIf="addhotel.get('zipcode').touched && addhotel.get('zipcode').invalid"
                        class="invalid-feedback">
                        Zip code is required
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="phoneNumber" class="form-label">Phone Number</label>
                    <input type="text" class="form-control" id="phoneNumber" placeholder="Enter phone number"
                        formControlName="phonenumber"
                        [ngClass]="{ 'is-invalid': addhotel.get('phonenumber').touched && addhotel.get('phonenumber').invalid }">
                    <div *ngIf="addhotel.get('phonenumber').touched && addhotel.get('phonenumber').invalid"
                        class="invalid-feedback">
                        Enter a valid 10-digit phone number
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter email address"
                        formControlName="email"
                        [ngClass]="{ 'is-invalid': addhotel.get('email').touched && addhotel.get('email').invalid }">
                    <div *ngIf="addhotel.get('email').touched && addhotel.get('email').invalid"
                        class="invalid-feedback">
                        Enter a valid email
                    </div>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-12">
                    <label for="description" class="form-label">Description</label>
                    <textarea class="form-control" id="description" rows="3" placeholder="Enter hotel description"
                        formControlName="description"
                        [ngClass]="{ 'is-invalid': addhotel.get('description').touched && addhotel.get('description').invalid }"></textarea>
                    <div *ngIf="addhotel.get('description').touched && addhotel.get('description').invalid"
                        class="invalid-feedback">
                        Description is required
                    </div>
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-4">
                    <label for="starRating" class="form-label">Star Rating</label>
                    <input type="number" class="form-control" id="starRating" min="1" max="5" placeholder="1 to 5"
                        formControlName="rating"
                        [ngClass]="{ 'is-invalid': addhotel.get('rating').touched && addhotel.get('rating').invalid }">
                    <div *ngIf="addhotel.get('rating').touched && addhotel.get('rating').invalid"
                        class="invalid-feedback">
                        Star rating must be between 1 and 5
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="longitude" class="form-label">Longitude</label>
                    <input type="text" class="form-control" id="longitude" placeholder="Enter longitude"
                        formControlName="longitude"
                        [ngClass]="{ 'is-invalid': addhotel.get('longitude').touched && addhotel.get('longitude').invalid }">
                    <div *ngIf="addhotel.get('longitude').touched && addhotel.get('longitude').invalid"
                        class="invalid-feedback">
                        Longitude is required
                    </div>
                </div>
                <div class="col-md-4">
                    <label for="latitude" class="form-label">Latitude</label>
                    <input type="text" class="form-control" id="latitude" placeholder="Enter latitude"
                        formControlName="latitude"
                        [ngClass]="{ 'is-invalid': addhotel.get('latitude').touched && addhotel.get('latitude').invalid }">
                    <div *ngIf="addhotel.get('latitude').touched && addhotel.get('latitude').invalid"
                        class="invalid-feedback">
                        Latitude is required
                    </div>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-12">
                    <label for="image" class="form-label">Image</label>
                    <input type="file" class="form-control" id="image" formControlName="hotelimage"
                        [ngClass]="{ 'is-invalid': addhotel.get('hotelimage').touched && addhotel.get('hotelimage').invalid }">
                    <div *ngIf="addhotel.get('hotelimage').touched && addhotel.get('hotelimage').invalid"
                        class="invalid-feedback">
                        Image is required
                    </div>
                </div>
            </div>

            <div class="row-mb-4">
                <label for="latitude" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter password"
                    formControlName="password"
                    [ngClass]="{ 'is-invalid': addhotel.get('password').touched && addhotel.get('password').invalid }">
                <div *ngIf="addhotel.get('password').touched && addhotel.get('password').invalid"
                    class="invalid-feedback">
                    password is required
                </div>
            </div>

            <div class="text-center">
                <button type="submit" class="btn btn-primary px-5" (click)="submit()"
                    [disabled]="addhotel.invalid">Save</button>
            </div>
        </div>
    </div>
</div>



<!--Hotel Table-->

<div class="container mt-5" *ngIf="showhotelTable">
    <h2 class="text-center mb-4">Hotel List</h2>

    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="table-light">
                <tr>
                    <th scope="col">Hotel Name</th>
                    <th scope="col">Address</th>
                    <th scope="col">City</th>
                    <th scope="col">Phone Number</th>
                    <th scope="col">Email</th>
                    <th scope="col">Image</th>
                    <th scope="col" class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let hotel of hotellistData">
                    <td>{{ hotel.name }}</td>
                    <td>{{ hotel.address }}</td>
                    <td>{{ hotel.city }}</td>
                    <td>{{ hotel.phone_number }}</td>
                    <td>{{ hotel.email }}</td>
                    <td>
                        <img [src]="'http://localhost:3000'+ hotel.image" class="img-thumbnail"
                            style="width: 200px; height: auto;">
                    </td>
                    <td class="text-center">
                        <button class="btn btn-warning btn-sm mb-2" (click)="editHotel(hotel)">Edit</button>
                        <button class="btn btn-danger btn-sm" (click)="deleteHotel(hotel.hotel_id)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>





<!--- Success Alert -->


<div *ngIf="successAlert" class="alert alert-success alert-dismissible fade show position-fixed small-alert"
    role="alert" id="autoDismissAlert" style="top: 20px; right: 20px; z-index: 1050;">
    <strong>Success!</strong> {{this.responsemsg}}
</div>



<!--- Red Alert -->


<div *ngIf="offAlert" class="alert alert-dismissible fade show position-fixed small-alert" role="alert"
    id="autoDismissAlert" style="top: 20px; right: 20px; z-index: 1050; background-color: red; color: white;">
    <strong>Alert!</strong> {{this.responsemsg}}
</div>



<router-outlet></router-outlet>